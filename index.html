<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chochanini - Álbum Web App</title>
  <meta name="description" content="Una aplicación web estilo álbum Panini para coleccionar tus mejores chochas.">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Pacifico&family=Permanent+Marker&family=Anton&display=swap"
    rel="stylesheet">
</head>

<body>
  <div id="app">

    <!-- View: Login Screen -->
    <section id="login-view" class="view active-view">
      <header class="main-header">
        <h1 class="app-title">Chochanini</h1>
        <p class="app-subtitle">Tu Álbum de Chochas</p>
      </header>
      <div class="auth-container">
        <!-- Choice Buttons -->
        <div id="auth-choice" class="auth-actions">
          <button id="btn-show-login-choice" class="primary-btn">Iniciar Sesión</button>
          <button id="btn-show-register-choice" class="secondary-btn">Crear Cuenta Nueva</button>
        </div>

        <form id="login-form" class="auth-form hidden-view">
          <div class="form-group">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" placeholder="tu@email.com" required>
          </div>
          <div class="form-group">
            <label for="login-password">Contraseña</label>
            <input type="password" id="login-password" placeholder="••••••••" required>
          </div>
          <div class="auth-actions">
            <button type="submit" id="btn-login" class="primary-btn">Entrar</button>
            <button type="button" id="btn-back-to-choice-l" class="icon-btn" style="font-size: 0.9rem;">←
              Volver</button>
          </div>
        </form>

        <form id="register-form" class="auth-form hidden-view">
          <div class="form-group">
            <label for="reg-username">Nombre de Usuario (ID Amigos)</label>
            <input type="text" id="reg-username" placeholder="juan_leyenda" required>
          </div>
          <div class="form-group">
            <label for="reg-email">Email</label>
            <input type="email" id="reg-email" placeholder="tu@email.com" required>
          </div>
          <div class="form-group">
            <label for="reg-password">Contraseña</label>
            <input type="password" id="reg-password" placeholder="••••••••" required>
          </div>
          <div class="auth-actions">
            <button type="submit" id="btn-register" class="primary-btn">Registrarme</button>
            <button type="button" id="btn-back-to-choice-r" class="icon-btn" style="font-size: 0.9rem;">←
              Volver</button>
          </div>
        </form>
      </div>
    </section>

    <!-- View: Home Screen -->
    <section id="home-view" class="view hidden-view">
      <header class="main-header">
        <h1 class="app-title">Chochanini</h1>
        <p class="app-subtitle">Colecciona Chochas Legendarias</p>
      </header>

      <div class="user-status-card">
        <p id="user-greeting"></p>
        <p id="user-id-display"></p>
      </div>

      <div class="home-actions">
        <button id="btn-my-album" class="primary-btn">Mi Álbum</button>
        <button id="btn-friends" class="secondary-btn">Mis Amigos</button>
      </div>

      <button id="btn-logout" class="icon-btn logout-link">Cerrar Sesión</button>
    </section>

    <!-- View: Friends View -->
    <section id="friends-view" class="view hidden-view">
      <header class="album-header">
        <button id="btn-back-home-friends" class="icon-btn">←</button>
        <h2 class="album-name">Amigos</h2>
      </header>
      <div class="add-friend-container">
        <input type="text" id="friend-id-input" placeholder="ID de tu amigo (ej: juan_leyenda)">
        <button id="btn-add-friend" class="primary-btn"
          style="padding: 0.8rem 1.5rem; font-size: 1rem;">Agregar</button>
      </div>
      <div id="friendsGrid" class="friends-grid">
        <!-- Friends list will be injected here -->
      </div>
    </section>

    <!-- View: Album Grid -->
    <section id="album-view" class="view hidden-view">
      <header class="main-header" style="margin-bottom: 1rem;">
        <button id="btn-back-home" class="icon-btn" style="position: absolute; left: 20px; top: 30px;">←</button>
        <h2 id="album-title" class="app-title" style="font-size: 2.5rem;">Mi Álbum</h2>
      </header>

      <div id="stats-container" class="global-stats-bar">
        <p class="global-stats-title">Felicidades. La calidad de las chochas que consumes es de:</p>
        <div class="global-stats-value"><span id="average-stars-display">0.0</span> <span
            style="color: #ffcc00;">★</span></div>
      </div>

      <div id="albumGrid" class="sticker-grid">
        <!-- Stickers go here -->
      </div>

      <div class="fab-container">
        <button id="addChochaBtn" class="fab-btn">
          <span class="icon">+</span>
          <span class="text">Personaje</span>
        </button>
      </div>
    </section>

    <!-- Modal: Add Chocha -->
    <div id="add-chocha-modal" class="modal hidden-modal">
      <div class="modal-content sticker-style-modal">
        <span class="close-modal">&times;</span>
        <h3>Nueva Chocha Legendaria</h3>
        <form id="addChochaForm">
          <div class="form-group photo-upload-group">
            <div class="photo-preview" id="photoPreview">
              <span>Subir Foto</span>
            </div>
            <input type="file" id="chochaPhoto" accept="image/*" required>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="chochaName">Nombre</label>
              <input type="text" id="chochaName" placeholder="Nombre de la Chocha" required>
            </div>
            <div class="form-group">
              <label for="chochaAge">Edad</label>
              <input type="number" id="chochaAge" placeholder="25">
            </div>
            <div class="form-group">
              <label for="chochaNationality">Nacionalidad</label>
              <select id="chochaNationality">
                <!-- Options injected by JS -->
              </select>
            </div>
            <div class="form-group">
              <label for="chochaAcqDate">Fecha de Entrada</label>
              <input type="date" id="chochaAcqDate" required>
            </div>

            <div class="form-group full-width toggle-group">
              <label class="checkbox-container">
                <input type="checkbox" id="chochaIsVigente" checked>
                <span class="checkmark"></span>
                ¿Sigue Vigente? (Omitir fecha de salida)
              </label>
            </div>

            <div id="depDateGroup" class="form-group full-width" style="display: none;">
              <label for="chochaDepDate">Fecha de Salida</label>
              <input type="date" id="chochaDepDate">
            </div>

            <div class="form-group full-width skills-input-container">
              <label>Habilidades (1-5 estrellas)</label>
              <div class="skills-grid">
                <div class="skill-item">
                  <span>Mamando</span>
                  <div class="star-rating" data-skill="mamando">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                  </div>
                </div>
                <div class="skill-item">
                  <span>Brincando</span>
                  <div class="star-rating" data-skill="brincando">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                  </div>
                </div>
                <div class="skill-item">
                  <span>Movimiento</span>
                  <div class="star-rating" data-skill="movimiento">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-group full-width skills-input-container">
              <label>Características Adicionales</label>
              <div class="skills-grid">
                <div class="skill-item-select">
                  <span>Gordura</span>
                  <select id="chochaGordura" class="char-select" required>
                    <option value="" disabled selected>Seleccionar...</option>
                    <option value="5">Flaca (5 pts)</option>
                    <option value="4">Promedio (4 pts)</option>
                    <option value="2">Gorda (2 pts)</option>
                    <option value="1">Volqueta (1 pt)</option>
                  </select>
                </div>
                <div class="skill-item-select">
                  <span>Color</span>
                  <select id="chochaColor" class="char-select" required>
                    <option value="" disabled selected>Seleccionar...</option>
                    <option value="5">Blanquita (5 pts)</option>
                    <option value="4">Morenita (4 pts)</option>
                    <option value="3">Negrita (3 pts)</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-group full-width">
              <label for="chochaDesc">Descripción / Stats (Opcional)</label>
              <textarea id="chochaDesc" rows="2" placeholder="Algún detalle adicional sobre el personaje..."></textarea>
            </div>
          </div>

          <button type="submit" id="btn-save-chocha" class="save-btn">Guardar Personaje</button>
        </form>
      </div>
    </div>

    <div id="detail-modal" class="modal hidden-modal">
      <div class="modal-content detail-card-content">
        <button class="close-modal" id="btn-close-detail" style="top: 10px; right: 10px;">&times;</button>
        <div class="modal-body" id="detail-body">
          <!-- Detalle cargado por JS -->
        </div>
        <div class="detail-actions" style="margin-top: 1.5rem;">
          <button id="btn-edit-chocha" class="primary-btn btn-edit">Editar</button>
          <button id="btn-delete-chocha" class="primary-btn btn-delete">Eliminar</button>
        </div>
      </div>
    </div>
  </div>

  <input type="hidden" id="edit-chocha-id">
  <script type="module" src="/src/main.js"></script>
</body>

</html>